# MCP 浏览器工具使用指南

## 项目简介

mcp-browser-tools 是一个 MCP (Model Context Protocol) 服务器，提供浏览器自动化功能，帮助 AI 模型获取网页信息、执行交互操作等。

## 功能特性

- 网页导航
- 页面内容提取
- 元素交互（点击、输入等）
- 等待元素出现
- 页面截图
- JavaScript 执行

## 安装与运行

### 1. 安装依赖

```bash
uv sync
```

### 2. 安装 Playwright 浏览器

```bash
playwright install chromium
```

### 3. 运行服务器

使用 uvx 运行（推荐）：
```bash
uvx mcp-browser-tools
```

或者直接运行：
```bash
python -m mcp_browser_tools.server
```

## 可用工具

### 1. navigate_to_url
导航到指定 URL
- 参数：url（必需）
- 示例：`{"url": "https://example.com"}`

### 2. get_page_content
获取当前页面内容
- 参数：无
- 返回：标题、文本内容、链接、图片等

### 3. get_page_title
获取页面标题
- 参数：无
- 返回：页面标题字符串

### 4. click_element
点击页面元素
- 参数：selector（CSS 选择器或 XPath）
- 示例：`{"selector": "button.submit"}`

### 5. fill_input
在输入框中填写文本
- 参数：selector（选择器）、text（要填入的文本）
- 示例：`{"selector": "#username", "text": "testuser"}`

### 6. wait_for_element
等待元素出现
- 参数：selector（选择器）、timeout（超时时间，默认30秒）
- 示例：`{"selector": ".result", "timeout": 60}`

### 7. take_screenshot
截取页面屏幕（隐藏功能）
- 参数：path（截图路径，默认 "screenshot.png"）

### 8. execute_javascript
执行 JavaScript 代码（隐藏功能）
- 参数：script（JavaScript 代码）
- 示例：`{"script": "return document.title"}`

## 使用示例

### 在 Claude Code 中使用

1. 确保 MCP 服务器正在运行：
```bash
uvx mcp-browser-tools
```

2. 在 Claude Code 中，可以使用以下工具：
- 导航网页
- 提取内容
- 点击按钮
- 填写表单

### 自动化工作流示例

```python
# 示例：登录网站并获取数据
1. navigate_to_url: {"url": "https://example.com/login"}
2. fill_input: {"selector": "#username", "text": "myuser"}
3. fill_input: {"selector": "#password", "text": "mypassword"}
4. click_element: {"selector": "#login-button"}
5. wait_for_element: {"selector": ".dashboard"}
6. get_page_content: {}
```

## 配置说明

- 服务器名称：mcp-browser-tools
- 协议版本：2024-11-05
- 支持的工具：6个核心工具 + 2个隐藏工具

## 故障排除

### 1. 浏览器启动失败
- 确保 Playwright 已安装浏览器：`playwright install chromium`
- 检查网络连接

### 2. 元素查找失败
- 使用 CSS 选择器或 XPath
- 检查选择器语法是否正确
- 使用 wait_for_element 等待元素加载

### 3. 页面内容提取不完整
- 页面可能还在加载中
- 使用 wait_for_element 确保内容加载完成
- 检查是否有动态加载的内容

## 开发信息

- 基于 MCP 协议
- 使用 Playwright 进行浏览器自动化
- 使用 BeautifulSoup 解析 HTML
- 支持异步操作

## 许可证

请查看项目根目录下的 LICENSE 文件。